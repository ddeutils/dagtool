name: 04_builtin
type: dag
desc: |
  ## Builtin DAG
owner: "de-oncall@email.com"
tags:
  - "group:demo"
  - "tool:true"
  - "domain:demo"
tasks:
  - task: start
    op: empty

  - group: call_bash_group
    upstream: start
    tasks:
      - task: call_cmd
        op: bash
        command: "echo \"${AIRFLOW_ENV}\""

      - task: call_file
        op: bash
        # NOTE: This task allow to search jinja template from the `assets/` path.
        command: "dag-04-bash-script.sh"
        append_env: true
        env:
#          PROJECT_ID: "{{ vars('project_id') }}"
          PROJECT_ID: "Direct-project-id"
          BUCKET_ID: "Direct-bucket-id"
          NEW_ENV: "{{ env('AIRFLOW_ENV') }}"

  - group: call_python_group
    upstream: start
    tasks:
      - task: call_python
        op: python
        func: say_hi
        params:
          name: "World"

      - task: call_python_via_render
        op: python
        func: say_hi

  - task: call_custom
    upstream: start
    op: custom
    uses: demo_task
    params:
      name: "Jerry"
